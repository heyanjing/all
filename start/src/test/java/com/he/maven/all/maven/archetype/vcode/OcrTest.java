package com.he.maven.all.maven.archetype.vcode;

import org.junit.Before;
import org.junit.Test;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.util.ArrayList;
import java.util.List;

/**
 * Created by heyanjing on 2018/1/13 22:39.
 * https://github.com/tesseract-ocr/tesseract/wiki 可以下载tesseract的命令行工具
 * jTessBoxEditor工具下载  https://sourceforge.net/projects/vietocr/files/jTessBoxEditor/
 */
public class OcrTest {
    private static final Logger log = LoggerFactory.getLogger(OcrTest.class);
    public static List<String> orinalList=new ArrayList<>();
    public static List<String> orinalxList=new ArrayList<>();

    @Before
    public void before() throws Exception {
        orinalxList.add("KyhA");
        orinalxList.add("kqHq");
        orinalxList.add("DBjv");
        orinalxList.add("gPGb");
        orinalxList.add("GP8U");
        orinalxList.add("EScx");
        orinalxList.add("EAmF");
        orinalxList.add("tsxR");
        orinalxList.add("v43Z");
        orinalxList.add("QNGx");
        orinalxList.add("aiic");
        orinalxList.add("PBzZ");
        orinalxList.add("37Cx");
        orinalxList.add("9pA3");
        orinalxList.add("z2PP");
        orinalxList.add("MEK4");
        orinalxList.add("sV4z");
        orinalxList.add("DPCD");
        orinalxList.add("TmYd");
        orinalxList.add("r47c");
        orinalxList.add("djQj");
        orinalxList.add("SaW9");
        orinalxList.add("nktG");
        orinalxList.add("6jEN");
        orinalxList.add("aEtb");
        orinalxList.add("PkkK");
        orinalxList.add("Yz6i");
        orinalxList.add("h8KA");
        orinalxList.add("wSFK");
        orinalxList.add("Qy64");
        orinalxList.add("Gbs3");
        orinalxList.add("j4Er");
        orinalxList.add("2AZN");
        orinalxList.add("7r4p");
        orinalxList.add("qMbx");
        orinalxList.add("apQU");
        orinalxList.add("2yQ6");
        orinalxList.add("YBtW");
        orinalxList.add("qPGW");
        orinalxList.add("Z77N");
        orinalxList.add("y979");
        orinalxList.add("vVBA");
        orinalxList.add("nWfz");
        orinalxList.add("cAt7");
        orinalxList.add("HuMh");
        orinalxList.add("G8Rs");
        orinalxList.add("jj9t");
        orinalxList.add("f6M5");
        orinalxList.add("8nry");
        orinalxList.add("Zn5G");
        orinalxList.add("naHa");
        orinalxList.add("NbTj");
        orinalxList.add("UiTP");
        orinalxList.add("WC9B");
        orinalxList.add("ccb9");
        orinalxList.add("Z3KW");
        orinalxList.add("Pg6Z");
        orinalxList.add("QQMm");
        orinalxList.add("ceDz");
        orinalxList.add("sMFK");
        orinalxList.add("AEC8");
        orinalxList.add("mW29");
        orinalxList.add("V35U");
        orinalxList.add("bqUr");
        orinalxList.add("xrvt");
        orinalxList.add("XUhh");
        orinalxList.add("3FWM");
        orinalxList.add("sHq7");
        orinalxList.add("bHSS");
        orinalxList.add("XCCZ");
        orinalxList.add("XM7X");
        orinalxList.add("9KzR");
        orinalxList.add("hqSR");
        orinalxList.add("MEVK");
        orinalxList.add("Yt2t");
        orinalxList.add("Ta6a");
        orinalxList.add("tSbU");
        orinalxList.add("KzSB");
        orinalxList.add("Aq3K");
        orinalxList.add("5nwU");
        orinalxList.add("tXrX");
        orinalxList.add("V7i6");
        orinalxList.add("iaw4");
        orinalxList.add("Uhs3");
        orinalxList.add("SMmd");
        orinalxList.add("hQzW");
        orinalxList.add("waMb");
        orinalxList.add("eCvj");
        orinalxList.add("2dfj");
        orinalxList.add("aHKe");
        orinalxList.add("62gt");
        orinalxList.add("qBxA");
        orinalxList.add("qpsN");
        orinalxList.add("xv32");
        orinalxList.add("NWir");
        orinalxList.add("Xtdm");
        orinalxList.add("sKfV");
        orinalxList.add("FCny");
        orinalxList.add("7y5j");
        orinalxList.add("auGw");



        orinalList.add("q4hxAppnwm");
        orinalList.add("aaeCvutAGA");
        orinalList.add("G5BDaQz8jv");
        orinalList.add("VkA82FMyuj");
        orinalList.add("3hccmxjt57");
        orinalList.add("MVrVEDij8t");
        orinalList.add("NtBd28WgdG");
        orinalList.add("CuFGNUCGbG");
        orinalList.add("WEsaCPMyeX");
        orinalList.add("fpvbhUGrAy");
        orinalList.add("mSeBaCXUbC");
        orinalList.add("WBVvpQZ2xg");
        orinalList.add("zqETryxhdE");
        orinalList.add("ATdUViTaQD");
        orinalList.add("r6bX8gxERZ");
        orinalList.add("vZsDuuqc4q");
        orinalList.add("qPjGgda83F");
        orinalList.add("2BaEqHgi2Q");
        orinalList.add("NpEwwwW6j9");
        orinalList.add("brdP3TSwEp");
        orinalList.add("8ZDtg9ppyW");
        orinalList.add("7AxaWPTMxY");
        orinalList.add("D5ztyXUxDq");
        orinalList.add("bxB67VW8Zg");
        orinalList.add("vAtBFirgP5");
        orinalList.add("bjft8U43eq");
        orinalList.add("ZAFh6uX237");
        orinalList.add("XDkfYHkHFV");
        orinalList.add("TMkzMyQ8h2");
        orinalList.add("cr7Eybj6mg");
        orinalList.add("gGWKtk9F7k");
        orinalList.add("PntzYZHGYs");
        orinalList.add("4adqvjudCw");
        orinalList.add("pPHVnkuisf");
        orinalList.add("qRK88Gvs9G");
        orinalList.add("SKtGiyHmCd");
        orinalList.add("iUnmSHqABa");
        orinalList.add("vzTzymvceu");
        orinalList.add("9BAuCmvXiT");
        orinalList.add("wywA96Wscm");
        orinalList.add("YCqrqgt6Tz");
        orinalList.add("YnkMiUMVru");
        orinalList.add("d6mXcGjrbS");
        orinalList.add("xbZHKr48NM");
        orinalList.add("2afgHv2Zj2");
        orinalList.add("HyyKzxnvBF");
        orinalList.add("h4ERtmkWDT");
        orinalList.add("irg9ZRQwAj");
        orinalList.add("CbwbvQZsDA");
        orinalList.add("DCRcESW2zj");
        orinalList.add("iMxz9gzMZs");
        orinalList.add("WysC2dvy8z");
        orinalList.add("2T4QbbGQhE");
        orinalList.add("vWwzPDtcj8");
        orinalList.add("eFsQvxsvfW");
        orinalList.add("ZSxdR5wakX");
        orinalList.add("XAV9unat36");
        orinalList.add("5wEhRYadwS");
        orinalList.add("5Ki7HGUifn");
        orinalList.add("S9QguiCzwU");
        orinalList.add("NtpNP82hVT");
        orinalList.add("gFniqSivU2");
        orinalList.add("B3Ge4n7d5y");
        orinalList.add("ckG8UUUd8S");
        orinalList.add("YBREjDza6N");
        orinalList.add("P6Rjv6ji2e");
        orinalList.add("eaasAgjp79");
        orinalList.add("sqFUYsUMSx");
        orinalList.add("TC7zxCcdU9");
        orinalList.add("cGGqVDSDGm");
        orinalList.add("tbiHKK4X64");
        orinalList.add("cCrY9EydGk");
        orinalList.add("8KvRsZTef6");
        orinalList.add("7PjYZff9ED");
        orinalList.add("5Z49fjZ55p");
        orinalList.add("hs3h7Fdne6");
        orinalList.add("eS9pYsEDdv");
        orinalList.add("emMuxne3g9");
        orinalList.add("7kuMYTqH2K");
        orinalList.add("qey9zezEuN");
        orinalList.add("jsnhWrHsEt");
        orinalList.add("ek9YsgmKpf");
        orinalList.add("q5jUV4wQF8");
        orinalList.add("ztXQ5pPG2u");
        orinalList.add("85pGAaGDgC");
        orinalList.add("Qdj8Vfj385");
        orinalList.add("E6hPyPAmGU");
        orinalList.add("3AqDCFjaWg");
        orinalList.add("anGfxaz4vK");
        orinalList.add("tY6Aitw6fX");
        orinalList.add("MTTeUGFGWH");
        orinalList.add("aczCuES9jM");
        orinalList.add("9cEVGhGVhN");
        orinalList.add("GBCyZX9Vvc");
        orinalList.add("ipvX4v2dHG");
        orinalList.add("mqhSPveCR8");
        orinalList.add("jQy5VnkcnP");
        orinalList.add("GUGBhawm7N");
        orinalList.add("4nG3HavyWS");
        orinalList.add("bm7hG2Szds");
        orinalList.add("vGDde7ssYE");
        orinalList.add("qcPmK5WEry");
        orinalList.add("ViyNYVekGP");
        orinalList.add("TqppiPKzx2");
        orinalList.add("mVs2yYGUYT");
        orinalList.add("8b3czadvp5");
        orinalList.add("qr6m57Rinq");
        orinalList.add("aEyeVXSWGy");
        orinalList.add("jZshQXNy7K");
        orinalList.add("Babqqbe2D5");
        orinalList.add("8W76A4knfH");
        orinalList.add("9dAUbRiqnR");
        orinalList.add("uFk5yCN29i");
        orinalList.add("kY7ZGA486Q");
        orinalList.add("5dKnRXXdSt");
        orinalList.add("UNktheQ3bQ");
        orinalList.add("AYGX72zjNf");
        orinalList.add("bcdvkiuvNY");
        orinalList.add("YvF7Xg57AV");
        orinalList.add("rBEN9Qw25h");
        orinalList.add("aRVMTNSQrG");
        orinalList.add("BHiTtGz3zq");
        orinalList.add("fGdT4szKrs");
        orinalList.add("Yi8mUff8E6");
        orinalList.add("b5nq4PGRHp");
        orinalList.add("3X3DpSB7Zv");
        orinalList.add("haUTdK8gwF");
        orinalList.add("aKa4Bi3XdG");
        orinalList.add("RhkuC3kVz2");
        orinalList.add("9Crcj8yT4x");
        orinalList.add("7N5Mg7PW3P");
        orinalList.add("ETnWbnX4YM");
        orinalList.add("BUjezDBxSF");
        orinalList.add("hg3wYgKhAD");
        orinalList.add("Sks8MYNBNf");
        orinalList.add("UjZ8ZbX5Bt");
        orinalList.add("bRQ3iEYX3Q");
        orinalList.add("E4eNVnue57");
        orinalList.add("mQQNTAiH9W");
        orinalList.add("xRr5VP7nAE");
        orinalList.add("kYbskb9jGf");
        orinalList.add("t9QRhnBCbF");
        orinalList.add("sxENsunH6a");
        orinalList.add("TvzuVTTr24");
        orinalList.add("hTpxVy9NTV");
        orinalList.add("NvVunFnugj");
        orinalList.add("6i3MTipqkm");
        orinalList.add("A9bpkMWW2a");
        orinalList.add("d2wqw546pV");
        orinalList.add("NEXxg274b6");
        orinalList.add("bcfVYTEeqk");
        orinalList.add("aWPkvmabr6");
        orinalList.add("S5Fge9fXbs");
        orinalList.add("V8TbsQSXw7");
        orinalList.add("3VFsf442wV");
        orinalList.add("vh2zkvKKHd");
        orinalList.add("fEaVsVGmpc");
        orinalList.add("NeZhU2HVG9");
        orinalList.add("VFueGWqqsC");
        orinalList.add("ZGpCqFR3Cj");
        orinalList.add("mczUnXrpuV");
        orinalList.add("BDVPsy9miZ");
        orinalList.add("UFGjtPs6GB");
        orinalList.add("8Szqg9xaAG");
        orinalList.add("qeRgTZsmWr");
        orinalList.add("DWPGmPumKZ");
        orinalList.add("MkQyZdFjzz");
        orinalList.add("9gw5ZBdvkP");
        orinalList.add("TBVHVnfxXg");
        orinalList.add("9NPiznWciU");
        orinalList.add("XgvuF5GVCA");
        orinalList.add("4nd24g8X2P");
        orinalList.add("Sy5wBVcuB3");
        orinalList.add("WX7pxbeKRR");
        orinalList.add("PH9rng94Me");
        orinalList.add("gbyYRph7xs");
        orinalList.add("B9pEYtk7s8");
        orinalList.add("yxai3R4e8Z");
        orinalList.add("rUBE4UGSZs");
        orinalList.add("r4m3NKHraD");
        orinalList.add("FXquWjGhRu");
        orinalList.add("z4XgmAj7R5");
        orinalList.add("cgrsaNVpbr");
        orinalList.add("tfGkjGStPH");
        orinalList.add("4MgfWubVz7");
        orinalList.add("Ny8qtuN6eG");
        orinalList.add("6srG3crpQG");
        orinalList.add("XAGGSrvMrq");
        orinalList.add("dw5ja4QXfD");
        orinalList.add("YnRWmhXsev");
        orinalList.add("SGrY4zHHRc");
        orinalList.add("tzkUBbDgj7");
        orinalList.add("WFWa544HB9");
        orinalList.add("Nru5vtiUi6");
        orinalList.add("Whk33uVi5N");
        orinalList.add("6aACrtkGfG");
        orinalList.add("ermzVDbN5z");
        orinalList.add("8GDVz5ynjU");
        orinalList.add("HpkNpPYCW6");
        orinalList.add("5V85pQSfru");
    }

    /**
     * SpecCaptchaTest.out
     * ImageDenoiseTest.cleanImage
     */
    @Test
    public void recognize() throws Exception {
        String tessdataPath = "C:\\temp\\Tess4J\\tessdata";
        String lange = "eng";
//        lange = "chi_sim";
        lange = "num";
        int ok=0;
        for (int i = 0; i < 200; i++) {
            String imgPath = "D:\\ide\\temp\\original\\" + i + ".png";
            imgPath = "D:\\ide\\temp\\denoise\\" + i + ".png";
            imgPath = "C:\\temp\\denoise\\" + i + ".png";
            String result = Ocr.recognize(tessdataPath, lange, imgPath);
            result=result.replaceAll("\\n", "").replaceAll(" ","");
            log.info(result);
            if(result.equals(orinalList.get(i))){
                ok++;
            }else{
                log.warn("未识别{}",i);
            }

        }
        log.info("{}",ok/200.0);
    }
    @Test
    public void recognizex() throws Exception {
        String tessdataPath = "C:\\temp\\Tess4J\\tessdata";
        String lange = "eng";
        lange = "num";
        int ok=0;
        for (int i = 0; i < 100; i++) {
            String imgPath = imgPath = "C:\\temp\\denoisex\\" + i + ".png";
            String result = Ocr.recognize(tessdataPath, lange, imgPath);
            result=result.replaceAll("\\n", "").replaceAll(" ","");
            log.info(result);
            if(result.equals(orinalxList.get(i))){
                ok++;
            }else{
                log.warn("未识别{}",i);
            }

        }
        log.info("{}",ok/100.0);
    }



}